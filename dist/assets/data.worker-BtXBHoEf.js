(function(){"use strict";function Ci(D){return D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D}var hi={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Ii=hi.exports,yi;function Ri(){return yi||(yi=1,(function(D,G){((X,T)=>{D.exports=T()})(Ii,function X(){var T=typeof self<"u"?self:typeof window<"u"?window:T!==void 0?T:{},Q,B=!T.document&&!!T.postMessage,ni=T.IS_PAPA_WORKER||!1,v={},N=0,n={};function a(i){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=mi(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new Si(e),(this._handle.streamer=this)._config=e}).call(this,i),this.parseChunk=function(t,e){var s=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<s){let u=this._config.newline;u||(o=this._config.quoteChar||'"',u=this._handle.guessLineEndings(t,o)),t=[...t.split(u).slice(s)].join(u)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(t))!==void 0&&(t=o),this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t,o=(this._partialLine="",this._handle.parse(s,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=o.meta.cursor,s=(this._finished||(this._partialLine=s.substring(t-this._baseIndex),this._baseIndex=t),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),ni)T.postMessage({results:o,workerId:n.WORKER_ID,finished:s});else if(b(this._config.chunk)&&!e){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!s||!b(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),s||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):ni&&this._config.error&&T.postMessage({workerId:n.WORKER_ID,error:t,finished:!1})}}function j(i){var t;(i=i||{}).chunkSize||(i.chunkSize=n.RemoteChunkSize),a.call(this,i),this._nextChunk=B?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),B||(t.onload=$(this._chunkLoaded,this),t.onerror=$(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!B),this._config.downloadRequestHeaders){var e,s=this._config.downloadRequestHeaders;for(e in s)t.setRequestHeader(e,s[e])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+o));try{t.send(this._config.downloadRequestBody)}catch(u){this._chunkError(u.message)}B&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>(e=e.getResponseHeader("Content-Range"))!==null?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function O(i){(i=i||{}).chunkSize||(i.chunkSize=n.LocalChunkSize),a.call(this,i);var t,e,s=typeof FileReader<"u";this.stream=function(o){this._input=o,e=o.slice||o.webkitSlice||o.mozSlice,s?((t=new FileReader).onload=$(this._chunkLoaded,this),t.onerror=$(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,u=(this._config.chunkSize&&(u=Math.min(this._start+this._config.chunkSize,this._input.size),o=e.call(o,this._start,u)),t.readAsText(o,this._config.encoding));s||this._chunkLoaded({target:{result:u}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(t.error)}}function w(i){var t;a.call(this,i=i||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,s;if(!this._finished)return e=this._config.chunkSize,t=e?(s=t.substring(0,e),t.substring(e)):(s=t,""),this._finished=!t,this.parseChunk(s)}}function ti(i){a.call(this,i=i||{});var t=[],e=!0,s=!1;this.pause=function(){a.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){a.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):e=!0},this._streamData=$(function(o){try{t.push(typeof o=="string"?o:o.toString(this._config.encoding)),e&&(e=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(u){this._streamError(u)}},this),this._streamError=$(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=$(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Si(i){var t,e,s,o,u=Math.pow(2,53),K=-u,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,p=this,C=0,h=0,L=!1,c=!1,m=[],r={data:[],errors:[],meta:{}};function M(g){return i.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function A(){if(r&&s&&(U("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),s=!1),i.skipEmptyLines&&(r.data=r.data.filter(function(l){return!M(l)})),x()){let l=function(R,E){b(i.transformHeader)&&(R=i.transformHeader(R,E)),m.push(R)};if(r)if(Array.isArray(r.data[0])){for(var g=0;x()&&g<r.data.length;g++)r.data[g].forEach(l);r.data.splice(0,1)}else r.data.forEach(l)}function k(l,R){for(var E=i.header?{}:[],f=0;f<l.length;f++){var S=f,y=l[f],y=((W,d)=>(_=>(i.dynamicTypingFunction&&i.dynamicTyping[_]===void 0&&(i.dynamicTyping[_]=i.dynamicTypingFunction(_)),(i.dynamicTyping[_]||i.dynamicTyping)===!0))(W)?d==="true"||d==="TRUE"||d!=="false"&&d!=="FALSE"&&((_=>{if(z.test(_)&&(_=parseFloat(_),K<_&&_<u))return 1})(d)?parseFloat(d):V.test(d)?new Date(d):d===""?null:d):d)(S=i.header?f>=m.length?"__parsed_extra":m[f]:S,y=i.transform?i.transform(y,S):y);S==="__parsed_extra"?(E[S]=E[S]||[],E[S].push(y)):E[S]=y}return i.header&&(f>m.length?U("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+f,h+R):f<m.length&&U("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+f,h+R)),E}var I;r&&(i.header||i.dynamicTyping||i.transform)&&(I=1,!r.data.length||Array.isArray(r.data[0])?(r.data=r.data.map(k),I=r.data.length):r.data=k(r.data,0),i.header&&r.meta&&(r.meta.fields=m),h+=I)}function x(){return i.header&&m.length===0}function U(g,k,I,l){g={type:g,code:k,message:I},l!==void 0&&(g.row=l),r.errors.push(g)}b(i.step)&&(o=i.step,i.step=function(g){r=g,x()?A():(A(),r.data.length!==0&&(C+=g.data.length,i.preview&&C>i.preview?e.abort():(r.data=r.data[0],o(r,p))))}),this.parse=function(g,k,I){var l=i.quoteChar||'"',l=(i.newline||(i.newline=this.guessLineEndings(g,l)),s=!1,i.delimiter?b(i.delimiter)&&(i.delimiter=i.delimiter(g),r.meta.delimiter=i.delimiter):((l=((R,E,f,S,y)=>{var W,d,_,ii;y=y||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var ei=0;ei<y.length;ei++){for(var q,si=y[ei],P=0,Y=0,F=0,H=(_=void 0,new pi({comments:S,delimiter:si,newline:E,preview:10}).parse(R)),Z=0;Z<H.data.length;Z++)f&&M(H.data[Z])?F++:(q=H.data[Z].length,Y+=q,_===void 0?_=q:0<q&&(P+=Math.abs(q-_),_=q));0<H.data.length&&(Y/=H.data.length-F),(d===void 0||P<=d)&&(ii===void 0||ii<Y)&&1.99<Y&&(d=P,W=si,ii=Y)}return{successful:!!(i.delimiter=W),bestDelimiter:W}})(g,i.newline,i.skipEmptyLines,i.comments,i.delimitersToGuess)).successful?i.delimiter=l.bestDelimiter:(s=!0,i.delimiter=n.DefaultDelimiter),r.meta.delimiter=i.delimiter),mi(i));return i.preview&&i.header&&l.preview++,t=g,e=new pi(l),r=e.parse(t,k,I),A(),L?{meta:{paused:!0}}:r||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,e.abort(),t=b(i.chunk)?"":t.substring(e.getCharIndex())},this.resume=function(){p.streamer._halted?(L=!1,p.streamer.parseChunk(t,!0)):setTimeout(p.resume,3)},this.aborted=function(){return c},this.abort=function(){c=!0,e.abort(),r.meta.aborted=!0,b(i.complete)&&i.complete(r),t=""},this.guessLineEndings=function(R,l){R=R.substring(0,1048576);var l=new RegExp(oi(l)+"([^]*?)"+oi(l),"gm"),I=(R=R.replace(l,"")).split("\r"),l=R.split(`
`),R=1<l.length&&l[0].length<I[0].length;if(I.length===1||R)return`
`;for(var E=0,f=0;f<I.length;f++)I[f][0]===`
`&&E++;return E>=I.length/2?`\r
`:"\r"}}function oi(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pi(i){var t=(i=i||{}).delimiter,e=i.newline,s=i.comments,o=i.step,u=i.preview,K=i.fastMode,z=null,V=!1,p=i.quoteChar==null?'"':i.quoteChar,C=p;if(i.escapeChar!==void 0&&(C=i.escapeChar),(typeof t!="string"||-1<n.BAD_DELIMITERS.indexOf(t))&&(t=","),s===t)throw new Error("Comment character same as delimiter");s===!0?s="#":(typeof s!="string"||-1<n.BAD_DELIMITERS.indexOf(s))&&(s=!1),e!==`
`&&e!=="\r"&&e!==`\r
`&&(e=`
`);var h=0,L=!1;this.parse=function(c,m,r){if(typeof c!="string")throw new Error("Input must be a string");var M=c.length,A=t.length,x=e.length,U=s.length,g=b(o),k=[],I=[],l=[],R=h=0;if(!c)return P();if(K||K!==!1&&c.indexOf(p)===-1){for(var E=c.split(e),f=0;f<E.length;f++){if(l=E[f],h+=l.length,f!==E.length-1)h+=e.length;else if(r)return P();if(!s||l.substring(0,U)!==s){if(g){if(k=[],ii(l.split(t)),Y(),L)return P()}else ii(l.split(t));if(u&&u<=f)return k=k.slice(0,u),P(!0)}}return P()}for(var S=c.indexOf(t,h),y=c.indexOf(e,h),W=new RegExp(oi(C)+oi(p),"g"),d=c.indexOf(p,h);;)if(c[h]===p)for(d=h,h++;;){if((d=c.indexOf(p,d+1))===-1)return r||I.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:h}),q();if(d===M-1)return q(c.substring(h,d).replace(W,p));if(p===C&&c[d+1]===C)d++;else if(p===C||d===0||c[d-1]!==C){S!==-1&&S<d+1&&(S=c.indexOf(t,d+1));var _=ei((y=y!==-1&&y<d+1?c.indexOf(e,d+1):y)===-1?S:Math.min(S,y));if(c.substr(d+1+_,A)===t){l.push(c.substring(h,d).replace(W,p)),c[h=d+1+_+A]!==p&&(d=c.indexOf(p,h)),S=c.indexOf(t,h),y=c.indexOf(e,h);break}if(_=ei(y),c.substring(d+1+_,d+1+_+x)===e){if(l.push(c.substring(h,d).replace(W,p)),si(d+1+_+x),S=c.indexOf(t,h),d=c.indexOf(p,h),g&&(Y(),L))return P();if(u&&k.length>=u)return P(!0);break}I.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:h}),d++}}else if(s&&l.length===0&&c.substring(h,h+U)===s){if(y===-1)return P();h=y+x,y=c.indexOf(e,h),S=c.indexOf(t,h)}else if(S!==-1&&(S<y||y===-1))l.push(c.substring(h,S)),h=S+A,S=c.indexOf(t,h);else{if(y===-1)break;if(l.push(c.substring(h,y)),si(y+x),g&&(Y(),L))return P();if(u&&k.length>=u)return P(!0)}return q();function ii(F){k.push(F),R=h}function ei(F){var H=0;return H=F!==-1&&(F=c.substring(d+1,F))&&F.trim()===""?F.length:H}function q(F){return r||(F===void 0&&(F=c.substring(h)),l.push(F),h=M,ii(l),g&&Y()),P()}function si(F){h=F,ii(l),l=[],y=c.indexOf(e,h)}function P(F){if(i.header&&!m&&k.length&&!V){var H=k[0],Z=Object.create(null),gi=new Set(H);let ji=!1;for(let ai=0;ai<H.length;ai++){let J=H[ai];if(Z[J=b(i.transformHeader)?i.transformHeader(J,ai):J]){let ri,_i=Z[J];for(;ri=J+"_"+_i,_i++,gi.has(ri););gi.add(ri),H[ai]=ri,Z[J]++,ji=!0,(z=z===null?{}:z)[ri]=J}else Z[J]=1,H[ai]=J;gi.add(J)}ji&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:k,errors:I,meta:{delimiter:t,linebreak:e,aborted:L,truncated:!!F,cursor:R+(m||0),renamedHeaders:z}}}function Y(){o(P()),k=[],I=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return h}}function Fi(i){var t=i.data,e=v[t.workerId],s=!1;if(t.error)e.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){s=!0,Ti(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:vi,resume:vi};if(b(e.userStep)){for(var u=0;u<t.results.data.length&&(e.userStep({data:t.results.data[u],errors:t.results.errors,meta:t.results.meta},o),!s);u++);delete t.results}else b(e.userChunk)&&(e.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!s&&Ti(t.workerId,t.results)}function Ti(i,t){var e=v[i];b(e.userComplete)&&e.userComplete(t),e.terminate(),delete v[i]}function vi(){throw new Error("Not implemented.")}function mi(i){if(typeof i!="object"||i===null)return i;var t,e=Array.isArray(i)?[]:{};for(t in i)e[t]=mi(i[t]);return e}function $(i,t){return function(){i.apply(t,arguments)}}function b(i){return typeof i=="function"}return n.parse=function(i,t){var e=(t=t||{}).dynamicTyping||!1;if(b(e)&&(t.dynamicTypingFunction=e,e={}),t.dynamicTyping=e,t.transform=!!b(t.transform)&&t.transform,!t.worker||!n.WORKERS_SUPPORTED)return e=null,n.NODE_STREAM_INPUT,typeof i=="string"?(i=(s=>s.charCodeAt(0)!==65279?s:s.slice(1))(i),e=new(t.download?j:w)(t)):i.readable===!0&&b(i.read)&&b(i.on)?e=new ti(t):(T.File&&i instanceof File||i instanceof Object)&&(e=new O(t)),e.stream(i);(e=(()=>{var s;return!!n.WORKERS_SUPPORTED&&(s=(()=>{var o=T.URL||T.webkitURL||null,u=X.toString();return n.BLOB_URL||(n.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",u,")();"],{type:"text/javascript"})))})(),(s=new T.Worker(s)).onmessage=Fi,s.id=N++,v[s.id]=s)})()).userStep=t.step,e.userChunk=t.chunk,e.userComplete=t.complete,e.userError=t.error,t.step=b(t.step),t.chunk=b(t.chunk),t.complete=b(t.complete),t.error=b(t.error),delete t.worker,e.postMessage({input:i,config:t,workerId:e.id})},n.unparse=function(i,t){var e=!1,s=!0,o=",",u=`\r
`,K='"',z=K+K,V=!1,p=null,C=!1,h=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||n.BAD_DELIMITERS.filter(function(m){return t.delimiter.indexOf(m)!==-1}).length||(o=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(e=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(V=t.skipEmptyLines),typeof t.newline=="string"&&(u=t.newline),typeof t.quoteChar=="string"&&(K=t.quoteChar),typeof t.header=="boolean"&&(s=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");p=t.columns}t.escapeChar!==void 0&&(z=t.escapeChar+K),t.escapeFormulae instanceof RegExp?C=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(C=/^[=+\-@\t\r].*$/)}})(),new RegExp(oi(K),"g"));if(typeof i=="string"&&(i=JSON.parse(i)),Array.isArray(i)){if(!i.length||Array.isArray(i[0]))return L(null,i,V);if(typeof i[0]=="object")return L(p||Object.keys(i[0]),i,V)}else if(typeof i=="object")return typeof i.data=="string"&&(i.data=JSON.parse(i.data)),Array.isArray(i.data)&&(i.fields||(i.fields=i.meta&&i.meta.fields||p),i.fields||(i.fields=Array.isArray(i.data[0])?i.fields:typeof i.data[0]=="object"?Object.keys(i.data[0]):[]),Array.isArray(i.data[0])||typeof i.data[0]=="object"||(i.data=[i.data])),L(i.fields||[],i.data||[],V);throw new Error("Unable to serialize unrecognized input");function L(m,r,M){var A="",x=(typeof m=="string"&&(m=JSON.parse(m)),typeof r=="string"&&(r=JSON.parse(r)),Array.isArray(m)&&0<m.length),U=!Array.isArray(r[0]);if(x&&s){for(var g=0;g<m.length;g++)0<g&&(A+=o),A+=c(m[g],g);0<r.length&&(A+=u)}for(var k=0;k<r.length;k++){var I=(x?m:r[k]).length,l=!1,R=x?Object.keys(r[k]).length===0:r[k].length===0;if(M&&!x&&(l=M==="greedy"?r[k].join("").trim()==="":r[k].length===1&&r[k][0].length===0),M==="greedy"&&x){for(var E=[],f=0;f<I;f++){var S=U?m[f]:f;E.push(r[k][S])}l=E.join("").trim()===""}if(!l){for(var y=0;y<I;y++){0<y&&!R&&(A+=o);var W=x&&U?m[y]:y;A+=c(r[k][W],y)}k<r.length-1&&(!M||0<I&&!R)&&(A+=u)}}return A}function c(m,r){var M,A;return m==null?"":m.constructor===Date?JSON.stringify(m).slice(1,25):(A=!1,C&&typeof m=="string"&&C.test(m)&&(m="'"+m,A=!0),M=m.toString().replace(h,z),(A=A||e===!0||typeof e=="function"&&e(m,r)||Array.isArray(e)&&e[r]||((x,U)=>{for(var g=0;g<U.length;g++)if(-1<x.indexOf(U[g]))return!0;return!1})(M,n.BAD_DELIMITERS)||-1<M.indexOf(o)||M.charAt(0)===" "||M.charAt(M.length-1)===" ")?K+M+K:M)}},n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!B&&!!T.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=pi,n.ParserHandle=Si,n.NetworkStreamer=j,n.FileStreamer=O,n.StringStreamer=w,n.ReadableStreamStreamer=ti,T.jQuery&&((Q=T.jQuery).fn.parse=function(i){var t=i.config||{},e=[];return this.each(function(u){if(!(Q(this).prop("tagName").toUpperCase()==="INPUT"&&Q(this).attr("type").toLowerCase()==="file"&&T.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)e.push({file:this.files[K],inputElem:this,instanceConfig:Q.extend({},t)})}),s(),this;function s(){if(e.length===0)b(i.complete)&&i.complete();else{var u,K,z,V,p=e[0];if(b(i.before)){var C=i.before(p.file,p.inputElem);if(typeof C=="object"){if(C.action==="abort")return u="AbortError",K=p.file,z=p.inputElem,V=C.reason,void(b(i.error)&&i.error({name:u},K,z,V));if(C.action==="skip")return void o();typeof C.config=="object"&&(p.instanceConfig=Q.extend(p.instanceConfig,C.config))}else if(C==="skip")return void o()}var h=p.instanceConfig.complete;p.instanceConfig.complete=function(L){b(h)&&h(L,p.file,p.inputElem),o()},n.parse(p.file,p.instanceConfig)}}function o(){e.splice(0,1),s()}}),ni&&(T.onmessage=function(i){i=i.data,n.WORKER_ID===void 0&&i&&(n.WORKER_ID=i.workerId),typeof i.input=="string"?T.postMessage({workerId:n.WORKER_ID,results:n.parse(i.input,i.config),finished:!0}):(T.File&&i.input instanceof File||i.input instanceof Object)&&(i=n.parse(i.input,i.config))&&T.postMessage({workerId:n.WORKER_ID,results:i,finished:!0})}),(j.prototype=Object.create(a.prototype)).constructor=j,(O.prototype=Object.create(a.prototype)).constructor=O,(w.prototype=Object.create(w.prototype)).constructor=w,(ti.prototype=Object.create(a.prototype)).constructor=ti,n})})(hi)),hi.exports}var Oi=Ri(),Ai=Ci(Oi);const ci={"hilton-tokyo":{id:"hilton-tokyo",name:"Hilton Tokyo (ヒルトン東京)",type:"hotel",city:"Tokyo",coordinates:{lat:35.6925,lon:139.6921},description:"Top Pick Hotel - 6-6-2 Nishi-Shinjuku.",url:"https://www.hilton.com/en/hotels/tyohitw-hilton-tokyo/",tags:["City Views","Executive Lounge"],hotelMeta:{address:"6-6-2 Nishi-Shinjuku, Shinjuku-ku, Tokyo 160-0023, Japan",directions:"https://www.google.com/maps/dir/?api=1&destination=35.6925,139.6921&travelmode=transit",neighborhoodInsights:"Nishi-Shinjuku is Tokyo's premier skyscraper district. It offers a sophisticated, professional atmosphere a short walk from the neon-lit 'Golden Gai'.",tags:["City Views","Executive Lounge"]}},"haneda-airport":{id:"haneda-airport",name:"Haneda Airport (羽田空港)",type:"travel",city:"Tokyo",coordinates:{lat:35.5494,lon:139.7798},description:"Arrival Airport (10:25 AM)",url:"https://tokyo-haneda.com/en/",tags:["Gateway Hub","Efficient"]},"shinjuku-station":{id:"shinjuku-station",name:"Shinjuku Station (新宿駅)",type:"travel",city:"Tokyo",coordinates:{lat:35.6896,lon:139.7006},description:"Main Transport Hub",url:"https://www.gotokyo.org/en/destinations/western-tokyo/shinjuku/index.html",tags:["Bustling Hub","Connected"]},"shinjuku-gyoen":{id:"shinjuku-gyoen",name:"Shinjuku Gyoen (新宿御苑)",type:"sight",city:"Tokyo",coordinates:{lat:35.6852,lon:139.7101},description:"Serene garden with greenhouse",url:"https://www.env.go.jp/garden/shinjukugyoen/english/index.html",tags:["Urban Oasis","Greenhouse"]},"senso-ji":{id:"senso-ji",name:"Senso-ji (浅草寺)",type:"sight",city:"Tokyo",coordinates:{lat:35.7148,lon:139.7967},description:"Tokyo's oldest temple (Asakusa)",url:"https://www.senso-ji.jp/english/",tags:["Historic Temple","Asakusa Vibe"]},"imperial-palace-east":{id:"imperial-palace-east",name:"Imperial Palace East Gardens (皇居東御苑)",type:"sight",city:"Tokyo",coordinates:{lat:35.6852,lon:139.7528},description:"Historic castle grounds",url:"https://www.kunaicho.go.jp/e-event/higashigyoen02.html",tags:["Castle Ruins","Serene Walk"]},"shinjuku-nichome":{id:"shinjuku-nichome",name:"Shinjuku Ni-chome (新宿二丁目)",type:"sight",city:"Tokyo",coordinates:{lat:35.6905,lon:139.7066},description:"Tokyo's Gay District",url:"https://www.timeout.com/tokyo/lgbtq/shinjuku-nichome-guide",tags:["Gay District","Micro-Bars"]},"shibuya-crossing":{id:"shibuya-crossing",name:"Shibuya Crossing (渋谷スクランブル交差点)",type:"sight",city:"Tokyo",coordinates:{lat:35.6595,lon:139.7004},description:"Iconic Scramble Crossing",url:"https://www.japan-guide.com/e/e3007.html",tags:["Iconic Scramble","Chaotic Energy"]},"tokyo-metro-gov":{id:"tokyo-metro-gov",name:"Tokyo Metro Gov Building (東京都庁舎)",type:"sight",city:"Tokyo",coordinates:{lat:35.6896,lon:139.6921},description:"Free Panoramic Views",url:"https://www.yokoso.metro.tokyo.lg.jp/en/tenbou/",tags:["Free Views","Panoramic"]},torikizoku:{id:"torikizoku",name:"Torikizoku (鳥貴族)",type:"food",city:"Tokyo",coordinates:{lat:35.6938,lon:139.7016},description:"Casual Yakitori (All items same price)",url:"https://www.torikizoku.co.jp/en/",tags:["Cheap Yakitori","Izakaya Chain"]},"omoide-yokocho":{id:"omoide-yokocho",name:"Omoide Yokocho (思い出横丁)",type:"food",city:"Tokyo",coordinates:{lat:35.6929,lon:139.6995},description:"Atmospheric Memory Lane (Yakitori)",url:"https://en.shinjuku-omoide.com/",tags:["Nostalgic Alley","Yakitori"]},"tsukiji-market":{id:"tsukiji-market",name:"Tsukiji Outer Market (築地場外市場)",type:"food",city:"Tokyo",coordinates:{lat:35.6655,lon:139.7704},description:"Fresh Seafood Breakfast/Lunch",url:"https://www.tsukiji.or.jp/english/",tags:["Fresh Seafood","Street Food"]},"konjiki-hototogisu":{id:"konjiki-hototogisu",name:"Konjiki Hototogisu (金色不如帰)",type:"food",city:"Tokyo",coordinates:{lat:35.6897,lon:139.7047},description:"Michelin Star Ramen (Clam Broth)",url:"https://konjikihototogisu.com/",tags:["Michelin Ramen","Clam Broth"]},"ramen-nagi":{id:"ramen-nagi",name:"Ramen Nagi (ラーメン凪)",type:"food",city:"Tokyo",coordinates:{lat:35.6943,lon:139.7046},description:"Famous Niboshi (Sardine) Ramen",url:"http://www.n-nagi.com/english/",tags:["Niboshi Ramen","Golden Gai"]},fuunji:{id:"fuunji",name:"Fuunji (風雲児)",type:"food",city:"Tokyo",coordinates:{lat:35.6872,lon:139.6967},description:"Legendary Tsukemen (Dipping Noodles)",url:"https://www.fu-unji.com/",tags:["Dipping Noodles","Tsukemen"]},"ichiran-shinjuku":{id:"ichiran-shinjuku",name:"Ichiran Shinjuku (一蘭 新宿)",type:"maria Tips",city:"Tokyo",coordinates:{lat:35.6909,lon:139.7032},description:"The ultimate solo dining experience. Customize your Tonkotsu ramen.",url:"https://en.ichiran.com/shop/tokyo/shinjuku-chuo-higashiguchi/",tags:["Tonkotsu Ramen","Solo Booths"]},"sushi-kunimitsu":{id:"sushi-kunimitsu",name:"Sushi Kunimitsu (鮨 くにみつ)",type:"food",city:"Tokyo",coordinates:{lat:35.7061,lon:139.6839},description:"Highly rated Omakase course (4.7★).",url:"https://www.instagram.com/sushi_kunimitsu/",tags:["Omakase","Intimate"]},"osushiya-taiki":{id:"osushiya-taiki",name:"Osushiya Taiki (お鮨屋 たいき)",type:"food",city:"Tokyo",coordinates:{lat:35.7135,lon:139.704},description:"Intimate counter sushi in Takadanobaba.",url:"https://tabelog.com/en/tokyo/A1305/A130503/13247065/",tags:["Sushi","Counter Seating"]},"ginza-district":{id:"ginza-district",name:"Ginza District (銀座)",type:"sight",city:"Tokyo",coordinates:{lat:35.6712,lon:139.7665},description:"Symbol of luxury and modernity.",url:"https://www.japan-guide.com/e/e3005.html",tags:["Luxury Shopping","Upscale Dining"]},"tokyo-tower":{id:"tokyo-tower",name:"Tokyo Tower (東京タワー)",type:"sight",city:"Tokyo",coordinates:{lat:35.6586,lon:139.7454},description:"Iconic red tower with city views.",url:"https://www.tokyotower.co.jp/en/",tags:["Iconic Landmark","Red Tower"]},"zojo-ji":{id:"zojo-ji",name:"Zojo-ji Temple (増上寺)",type:"sight",city:"Tokyo",coordinates:{lat:35.6574,lon:139.7482},description:"Where modernity meets tradition.",url:"https://www.zojoji.or.jp/en/",tags:["Historic Temple","Tower Views"]},"meiji-shrine":{id:"meiji-shrine",name:"Meiji Shrine (明治神宮)",type:"sight",city:"Tokyo",coordinates:{lat:35.6764,lon:139.6993},description:"Serene Shinto shrine in a dense forest.",url:"https://www.meijijingu.or.jp/en/",tags:["Shinto Shrine","Forested"]},kabukicho:{id:"kabukicho",name:"Kabukicho (歌舞伎町)",type:"sight",city:"Tokyo",coordinates:{lat:35.6938,lon:139.7035},description:"The famous 'red light' and nightlife district.",url:"https://www.gotokyo.org/en/destinations/western-tokyo/shinjuku/index.html",tags:["Red Light District","Neon Lights"]},omotesando:{id:"omotesando",name:"Omotesando (表参道)",type:"sight",city:"Tokyo",coordinates:{lat:35.6652,lon:139.7125},description:"Tree-lined fashion and architecture avenue.",url:"https://www.japan-guide.com/e/e3006.html",tags:["Architecture","Luxury Fashion"]},"takeshita-street":{id:"takeshita-street",name:"Takeshita Street (竹下通り)",type:"sight",city:"Tokyo",coordinates:{lat:35.6715,lon:139.7031},description:"Harajuku youth culture and urban tribes.",url:"https://www.japan-guide.com/e/e3006.html",tags:["Harajuku Fashion","Crepes"]},"hachiko-statue":{id:"hachiko-statue",name:"Hachiko Statue (忠犬ハチ公像)",type:"sight",city:"Tokyo",coordinates:{lat:35.6591,lon:139.7006},description:"Legendary loyal dog statue in Shibuya.",url:"https://www.japan-guide.com/e/e3007.html",tags:["Loyal Dog","Meeting Spot"]},"akihabara-electric":{id:"akihabara-electric",name:"Akihabara Electric Town (秋葉原電気街)",type:"sight",city:"Tokyo",coordinates:{lat:35.6997,lon:139.7713},description:"Neons, anime, manga, and video games.",url:"https://www.japan-guide.com/e/e3003.html",tags:["Anime Culture","Electronics"]},hamarikyu:{id:"hamarikyu",name:"Hamarikyu Gardens (浜離宮恩賜庭園)",type:"sight",city:"Tokyo",coordinates:{lat:35.6601,lon:139.763},description:"Quiet garden right next to Tsukiji Outer Market.",url:"https://www.tokyo-park.or.jp/teien/en/hama-rikyu/",tags:["Seaside Garden","Teahouse"]},"yamato-sushi":{id:"yamato-sushi",name:"Yamato Sushi (大和寿司)",type:"food",city:"Tokyo",coordinates:{lat:35.6465,lon:139.7879},description:"Fresh sushi at Toyosu Market.",url:"https://www.sushiyamato-toyosu.com/",tags:["Tsukiji Fresh","Sushi Breakfast"]},"hakushu-teppanyaki":{id:"hakushu-teppanyaki",name:"Hakushu Teppanyaki (鉄板焼き 白秋)",type:"food",city:"Tokyo",coordinates:{lat:35.6558,lon:139.7015},description:"High-end Teppanyaki for Kobe beef.",url:"https://teppanyaki-hakushu.com/",tags:["Kobe Beef","Teppanyaki"]},"niagara-curry":{id:"niagara-curry",name:"Niágara Curry (ナイアガラ)",type:"food",city:"Tokyo",coordinates:{lat:35.6375,lon:139.6917},description:"Train-themed curry restaurant in Yutenji.",url:"https://www.niagara-curry.com/",tags:["Train Theme","Curry Rice"]},"ginza-shopping":{id:"ginza-shopping",name:"Ginza Shopping Area (銀座ショッピングエリア)",type:"shopping",city:"Tokyo",coordinates:{lat:35.6712,lon:139.7651},description:"Luxury boutiques and department stores.",url:"https://www.japan-guide.com/e/e3005.html",tags:["High-End Retail","Pedestrian Paradise"]},"akihabara-shopping":{id:"akihabara-shopping",name:"Akihabara Shopping (秋葉原ショッピングエリア)",type:"shopping",city:"Tokyo",coordinates:{lat:35.6984,lon:139.7731},description:"Best for electronics and anime merchandise.",url:"https://www.japan-guide.com/e/e3003.html",tags:["Otaku Goods","Gadgets"]},"gion-district":{id:"gion-district",name:"Gion District (祇園)",type:"sight",city:"Kyoto",coordinates:{lat:35.0037,lon:135.7785},description:"Historic Geisha District",url:"https://www.japan-guide.com/e/e3902.html",tags:["Geisha District","Traditional"]},"fushimi-inari":{id:"fushimi-inari",name:"Fushimi Inari Taisha (伏見稲荷大社)",type:"sight",city:"Kyoto",coordinates:{lat:34.9671,lon:135.7727},description:"1,000 Red Torii Gates",url:"http://inari.jp/en/",tags:["Torii Gates","Mountain Hike"]},"kiyomizu-dera":{id:"kiyomizu-dera",name:"Kiyomizu-dera (清水寺)",type:"sight",city:"Kyoto",coordinates:{lat:34.9949,lon:135.785},description:"Iconic Wooden Temple",url:"https://www.kiyomizudera.or.jp/en/",tags:["Wooden Stage","Hillside Views"]},arashiyama:{id:"arashiyama",name:"Arashiyama Bamboo Grove (嵐山竹林)",type:"sight",city:"Kyoto",coordinates:{lat:35.0094,lon:135.6668},description:"Famous Bamboo Forest",url:"https://www.japan-guide.com/e/e3912.html",tags:["Bamboo Forest","Photo Spot"]},"nishiki-market":{id:"nishiki-market",name:"Nishiki Market (錦市場)",type:"food",city:"Kyoto",coordinates:{lat:35.005,lon:135.7649},description:"Kyoto's Kitchen (Street Food)",url:"https://www.kyoto-nishiki.or.jp/",tags:["Kitchen of Kyoto","Food Stalls"]},"honke-daiichi":{id:"honke-daiichi",name:"Honke Daiichi-Asahi (本家 第一旭)",type:"food",city:"Kyoto",coordinates:{lat:34.9856,lon:135.7602},description:"Classic Kyoto Soy Ramen",url:"https://www.honke-daiichiasahi.com/",tags:["Kyoto Ramen","Soy Broth"]},"menbaka-fire":{id:"menbaka-fire",name:"Menbaka Fire Ramen (めん馬鹿一代)",type:"maria Tips",city:"Kyoto",coordinates:{lat:35.0211,lon:135.746},description:"Explosive fire ramen performance.",url:"https://www.instagram.com/menbaka_fire_ramen",tags:["Fire Performance","Negi Ramen"]},"kyoto-imperial":{id:"kyoto-imperial",name:"Kyoto Imperial Palace (京都御所)",type:"sight",city:"Kyoto",coordinates:{lat:35.0254,lon:135.7621},description:"Historic palace grounds.",url:"https://sankan.kunaicho.go.jp/english/index.html",tags:["Imperial History","Spacious Park"]},higashiyama:{id:"higashiyama",name:"Higashiyama District (東山区)",type:"sight",city:"Kyoto",coordinates:{lat:34.9949,lon:135.785},description:"Historic preserved district.",url:"https://www.japan-guide.com/e/e3959.html",tags:["Preserved Streets","Old Kyoto"]},ninenzaka:{id:"ninenzaka",name:"Ninenzaka & Sannenzaka (二寧坂・産寧坂)",type:"sight",city:"Kyoto",coordinates:{lat:34.9968,lon:135.782},description:"Charming traditional sloping streets.",url:"https://www.japan-guide.com/e/e3959.html",tags:["Traditional Slopes","Souvenirs"]},"yasaka-pagoda":{id:"yasaka-pagoda",name:"Yasaka Pagoda (法観寺)",type:"sight",city:"Kyoto",coordinates:{lat:34.9985,lon:135.7794},description:"Iconic 5-story pagoda view.",url:"https://kyoto.travel/en/shrines_temples/160.html",tags:["Iconic Pagoda","Photo Spot"]},"yasaka-jinja":{id:"yasaka-jinja",name:"Yasaka Jinja (八坂神社)",type:"sight",city:"Kyoto",coordinates:{lat:35.0037,lon:135.7785},description:"Large shrine complex in Gion.",url:"https://www.yasaka-jinja.or.jp/en/",tags:["Gion Shrine","Lanterns"]},"shirakawa-lane":{id:"shirakawa-lane",name:"Shirakawa Lane (白川筋)",type:"sight",city:"Kyoto",coordinates:{lat:35.0055,lon:135.7758},description:"Scenic canal street in Gion.",url:"https://www.japan-guide.com/e/e3902.html",tags:["Scenic Canal","Willow Trees"]},"kinkaku-ji":{id:"kinkaku-ji",name:"Kinkaku-ji (金閣寺)",type:"sight",city:"Kyoto",coordinates:{lat:35.0394,lon:135.7292},description:"The Golden Pavilion.",url:"https://www.shokoku-ji.jp/en/kinkakuji/",tags:["Golden Pavilion","Zen Garden"]},"philosophers-path":{id:"philosophers-path",name:"Philosopher’s Path (哲学の道)",type:"sight",city:"Kyoto",coordinates:{lat:35.0268,lon:135.7954},description:"Pleasant canal-side walking path.",url:"https://www.japan-guide.com/e/e3906.html",tags:["Canal Walk","Cherry Blossoms"]},"ginkaku-ji":{id:"ginkaku-ji",name:"Ginkaku-ji (銀閣寺)",type:"sight",city:"Kyoto",coordinates:{lat:35.0267,lon:135.7982},description:"The Silver Pavilion.",url:"https://www.shokoku-ji.jp/en/ginkakuji/",tags:["Silver Pavilion","Sand Garden"]},"hikiniku-to-come":{id:"hikiniku-to-come",name:"Hikiniku to Come (挽肉と米)",type:"food",city:"Kyoto",coordinates:{lat:34.9965,lon:135.778},description:"Charcoal grilled hamburger steaks.",url:"https://hikinikutocome.com/en/",tags:["Hamburger Steak","Charcoal Grilled"]},"restaurante-tomisen":{id:"restaurante-tomisen",name:"Restaurante Tomisen (冨せん)",type:"food",city:"Kyoto",coordinates:{lat:35.004,lon:135.776},description:"Specialises in Sushi.",url:"https://tabelog.com/en/kyoto/A2601/A260301/26002011/",tags:["Family Sushi","Tatami"]},"mouriya-gion":{id:"mouriya-gion",name:"Mouriya Gion (モーリヤ祇園)",type:"food",city:"Kyoto",coordinates:{lat:35.0045,lon:135.7765},description:"Specialises in Kobe Beef.",url:"https://www.mouriya.co.jp/en/gion",tags:["Kobe Beef","Teppanyaki"]},"botanic-coffee":{id:"botanic-coffee",name:"Botanic Coffee Kyoto (ボタニックコーヒーキョウト)",type:"food",city:"Kyoto",coordinates:{lat:35.0012,lon:135.7595},description:"Retro café for pancakes and coffee.",url:"https://www.instagram.com/botanic_coffee_kyoto/",tags:["Vintage Cafe","Fluffy Pancakes"]},"starbucks-ninenzaka":{id:"starbucks-ninenzaka",name:"Starbucks Ninenzaka (スターバックス コーヒー 京都二寧坂ヤサカ茶屋店)",type:"food",city:"Kyoto",coordinates:{lat:34.9982,lon:135.7825},description:"Traditional house with tatami floors.",url:"https://store.starbucks.co.jp/detail-1484/",tags:["Tatami Seating","Machiya Style"]},"yojiya-main":{id:"yojiya-main",name:"Yojiya Main Store (よーじや祇園本店)",type:"shopping",city:"Kyoto",coordinates:{lat:35.0094,lon:135.7686},description:"Kyoto cosmetics and oil-blotting paper.",url:"https://www.yojiya.co.jp/english/",tags:["Cosmetics","Cafe"]},"shijo-kawaramachi":{id:"shijo-kawaramachi",name:"Shijo Kawaramachi (四条河原町)",type:"shopping",city:"Kyoto",coordinates:{lat:35.0039,lon:135.7684},description:"Kyoto's main shopping district.",url:"https://www.japan-guide.com/e/e3960.html",tags:["Shopping District","Department Stores"]},"hilton-osaka":{id:"hilton-osaka",name:"Hilton Osaka (ヒルトン大阪)",type:"hotel",city:"Osaka",coordinates:{lat:34.7003,lon:135.4955},description:"Top Pick Hotel in Umeda.",url:"https://www.hilton.com/en/hotels/osahitw-hilton-osaka/",tags:["Umeda Location","City Views"],hotelMeta:{address:"1-8-8, Umeda, Kita-ku, Osaka 530-0001, Japan",directions:"https://www.google.com/maps/dir/?api=1&destination=34.7003,135.4955&travelmode=transit,Umeda",neighborhoodInsights:"Umeda is Osaka's vertical city hub.",tags:["Umeda Location","City Views"]}},"osaka-castle":{id:"osaka-castle",name:"Osaka Castle (大阪城)",type:"sight",city:"Osaka",coordinates:{lat:34.6873,lon:135.5262},description:"Historic Landmark and museum.",url:"https://www.osakacastle.net/english/",tags:["Historic Castle","Park Views"]},dotonbori:{id:"dotonbori",name:"Dotonbori (道頓堀)",type:"sight",city:"Osaka",coordinates:{lat:34.6687,lon:135.5013},description:"Vibrant food and neon district.",url:"https://osaka-info.jp/en/spot/dotonbori/",tags:["Neon Lights","Street Food"]},shinsekai:{id:"shinsekai",name:"Shinsekai (新世界)",type:"sight",city:"Osaka",coordinates:{lat:34.652,lon:135.5063},description:"Retro Osaka entertainment district.",url:"https://osaka-info.jp/en/spot/shinsekai/",tags:["Retro Vibe","Kushikatsu"]},"doyama-cho":{id:"doyama-cho",name:"Dōyama-chō (堂山町)",type:"sight",city:"Osaka",coordinates:{lat:34.7036,lon:135.5033},description:"Osaka's main gay district.",url:"https://insideosaka.com/osaka-gay-district/",tags:["Gay District","Nightlife"]},"kushikatsu-daruma":{id:"kushikatsu-daruma",name:"Kushikatsu Daruma (串かつだるま)",type:"food",city:"Osaka",coordinates:{lat:34.669,lon:135.503},description:"Famous deep-fried skewers.",url:"https://www.kushikatsu-daruma.com/",tags:["Deep Fried Skewers","No Double Dipping"]},fukutaro:{id:"fukutaro",name:"Fukutaro (福太郎)",type:"food",city:"Osaka",coordinates:{lat:34.6645,lon:135.502},description:"Renowned okonomiyaki and negiyaki.",url:"https://2951.jp/",tags:["Okonomiyaki","Negiyaki"]},"ajinoya-honten":{id:"ajinoya-honten",name:"Ajinoya Honten (味乃家 本店)",type:"food",city:"Osaka",coordinates:{lat:34.668,lon:135.501},description:"Michelin Bib Gourmand Okonomiyaki.",url:"http://www.ajinoya-okonomiyaki.com/top/",tags:["Michelin Bib","Okonomiyaki"]},"den-den-town":{id:"den-den-town",name:"Den Den Town (でんでんタウン)",type:"sight",city:"Osaka",coordinates:{lat:34.6593,lon:135.506},description:"Osaka's electronics and anime district.",url:"https://osaka-info.jp/en/spot/nipponbashi-den-den-town/",tags:["Anime Goods","Electronics"]},"nishinomaru-garden":{id:"nishinomaru-garden",name:"Nishinomaru Garden (西の丸庭園)",type:"sight",city:"Osaka",coordinates:{lat:34.685,lon:135.5255},description:"Scenic garden in Osaka Castle Park.",url:"https://www.osakacastle.net/english/park/nishinomaru.html",tags:["Castle Views","Cherry Blossoms"]},"glico-man":{id:"glico-man",name:"Glico Man Sign (グリコサイン)",type:"sight",city:"Osaka",coordinates:{lat:34.6687,lon:135.5013},description:"Iconic photo spot in Dotonbori.",url:"https://osaka-info.jp/en/spot/dotonbori/",tags:["Iconic Photo","Dotonbori"]},"kani-doraku":{id:"kani-doraku",name:"Kani Doraku Dotonbori (かに道楽)",type:"food",city:"Osaka",coordinates:{lat:34.6687,lon:135.5013},description:"Famous crab specialty restaurant.",url:"https://douraku.co.jp/",tags:["Crab Feast","Moving Sign"]},"gems-namba":{id:"gems-namba",name:"GEMS Namba (GEMSなんば)",type:"food",city:"Osaka",coordinates:{lat:34.6644,lon:135.5008},description:"Dining complex for meat lovers.",url:"https://www.gems-portal.com/series/detail.php?id=8",tags:["Dining Complex","Namba"]},"ajinoya-branch":{id:"ajinoya-branch",name:"Ajinoya (味乃家)",type:"food",city:"Osaka",coordinates:{lat:34.668,lon:135.5015},description:"Famous fluffy Okonomiyaki.",url:"http://www.ajinoya-okonomiyaki.com/english/",tags:["Okonomiyaki","Fluffy Pancake"]},"don-quijote":{id:"don-quijote",name:"Don Quijote Dotonbori (ドン・キホーテ 道頓堀店)",type:"shopping",city:"Osaka",coordinates:{lat:34.6693,lon:135.5028},description:"Discount shopping and Ferris wheel.",url:"https://www.donki.com/en/",tags:["Discount Shopping","Ferris Wheel"]},"shinsaibashi-arcade":{id:"shinsaibashi-arcade",name:"Shinsaibashi Shopping Arcade (心斎橋筋商店街)",type:"shopping",city:"Osaka",coordinates:{lat:34.6716,lon:135.5015},description:"Premier covered shopping street.",url:"https://osaka-info.jp/en/spot/shinsaibashi-suji/",tags:["Covered Shopping","Fashion"]},"hilton-shanghai":{id:"hilton-shanghai",name:"Hilton Shanghai City Center (上海静安希尔顿酒店)",type:"hotel",city:"Shanghai",coordinates:{lat:31.2185,lon:121.4332},description:"Top Pick Hotel near Jing'an.",url:"https://www.hilton.com/en/hotels/shamshi-hilton-shanghai-city-center/",tags:["Central Location","Business"],hotelMeta:{address:"No. 488 West Yan'an Road, Shanghai, 200050, China",directions:"https://www.google.com/maps/dir/?api=1&destination=31.2185,121.4332&travelmode=transit,Located",neighborhoodInsights:"Near the Former French Concession.",tags:["Central Location","Business"]}},"pudong-airport":{id:"pudong-airport",name:"Pudong Airport (PVG) (浦东国际机场)",type:"travel",city:"Shanghai",coordinates:{lat:31.1443,lon:121.8083},description:"Arrival and Departure hub.",url:"https://www.shanghaiairport.com/en/",tags:["International Hub","Far from City"]},"maglev-station":{id:"maglev-station",name:"Maglev Longyang Rd (磁浮龙阳路站)",type:"travel",city:"Shanghai",coordinates:{lat:31.209,lon:121.558},description:"High Speed Maglev link to PVG.",url:"https://www.smtdc.com/en/",tags:["High Speed Train","Airport Link"]},"french-concession":{id:"french-concession",name:"French Concession (上海法租界)",type:"sight",city:"Shanghai",coordinates:{lat:31.2155,lon:121.4556},description:"Historic tree-lined walking area.",url:"https://www.smartshanghai.com/articles/tourist/the-former-french-concession/",tags:["Tree-lined Streets","European Vibe"]},"yu-garden":{id:"yu-garden",name:"Yu Garden (豫园)",type:"sight",city:"Shanghai",coordinates:{lat:31.2272,lon:121.4921},description:"Classical Ming-style garden.",url:"https://www.meet-in-shanghai.net/scenic-spots/yu-garden",tags:["Classical Garden","Old City"]},"the-bund":{id:"the-bund",name:"The Bund (外滩)",type:"sight",city:"Shanghai",coordinates:{lat:31.2402,lon:121.4905},description:"Iconic waterfront skyline view.",url:"https://www.meet-in-shanghai.net/scenic-spots/the-bund",tags:["Waterfront Views","Colonial Architecture"]},"fu-1039":{id:"fu-1039",name:"Fu 1039 (福1039)",type:"food",city:"Shanghai",coordinates:{lat:31.22,lon:121.43},description:"Classic Shanghainese in a villa.",url:"https://guide.michelin.com/en/shanghai-municipality/shanghai/restaurant/fu-1039",tags:["Shanghainese","Heritage Villa"]},"fu-he-hui":{id:"fu-he-hui",name:"Fu He Hui (福和慧)",type:"food",city:"Shanghai",coordinates:{lat:31.221,lon:121.431},description:"Michelin vegetarian fine dining.",url:"https://guide.michelin.com/en/shanghai-municipality/shanghai/restaurant/fu-he-hui",tags:["Vegetarian Fine Dining","Michelin"]},"old-jesse":{id:"old-jesse",name:"Old Jesse (老吉士)",type:"food",city:"Shanghai",coordinates:{lat:31.205,lon:121.44},description:"Authentic local Shanghainese food.",url:"https://guide.michelin.com/en/shanghai-municipality/shanghai/restaurant/old-jesse-xuhui",tags:["Authentic Local","Braised Pork"]},"jianguo-328":{id:"jianguo-328",name:"Jianguo 328 (建国328小馆)",type:"food",city:"Shanghai",coordinates:{lat:31.208,lon:121.455},description:"MSG-free local home cooking.",url:"https://guide.michelin.com/en/shanghai-municipality/shanghai/restaurant/jianguo-328",tags:["MSG-Free","Homestyle"]},"yangs-dumplings":{id:"yangs-dumplings",name:"Yang's Dumplings (小杨生煎)",type:"food",city:"Shanghai",coordinates:{lat:31.148,lon:121.81},description:"Famous pan-fried soup buns.",url:"https://www.smartshanghai.com/venue/2945/yang_s_fry-dumpling",tags:["Sheng Jian Bao","Pan-Fried"]},"hunt-bar":{id:"hunt-bar",name:"HUNT (HUNT酒吧)",type:"bar",city:"Shanghai",coordinates:{lat:31.2057,lon:121.4336},description:"Popular social gay bar.",url:"https://www.travelgay.com/venue/hunt-shanghai",tags:["Gay Bar","Social Hub"]},"nara-park":{id:"nara-park",name:"Nara Deer Park (奈良公園)",type:"sight",city:"Kyoto",coordinates:{lat:34.685,lon:135.843},description:"Park with wild bowing deer.",url:"https://www.japan-guide.com/e/e4103.html",tags:["Friendly Deer","Temple Grounds"]},"shanghai-tower":{id:"shanghai-tower",name:"Shanghai Tower (上海中心大厦)",type:"sight",city:"Shanghai",coordinates:{lat:31.233,lon:121.505},description:"China's tallest observation deck.",url:"https://en.shanghaitower.com/",tags:["Skyline","Views"]},"osaka-station":{id:"osaka-station",name:"Osaka Station (大阪駅)",type:"travel",city:"Osaka",coordinates:{lat:34.7025,lon:135.496},description:"Main transit hub for Umeda.",url:"https://www.westjr.co.jp/global/en/",tags:["Transport"]},"kansai-airport":{id:"kansai-airport",name:"Kansai Intl Airport (KIX) (関西国際空港)",type:"travel",city:"Osaka",coordinates:{lat:34.4325,lon:135.2304},description:"Departure airport for Osaka.",url:"https://www.kansai-airport.or.jp/en/",tags:["Airport","Departure"]},"kyoto-station":{id:"kyoto-station",name:"Kyoto Station (京都駅)",type:"travel",city:"Kyoto",coordinates:{lat:34.9858,lon:135.7588},description:"Major architectural transport hub.",url:"https://www.kyotostation.com/",tags:["Transport","Architecture"]},"ramen-tatsunoya":{id:"ramen-tatsunoya",name:"Ramen Tatsunoya (ラーメン龍の家)",type:"food",city:"Tokyo",coordinates:{lat:35.6946,lon:139.6993},description:"Tonkotsu ramen and dipping noodles.",url:"http://www.tatsunoya.net/",tags:["Ramen","Tsukemen","Lunch"]},"ishibekoji-muan":{id:"ishibekoji-muan",name:"Ishibekoji Muan (石塀小路 夢庵)",type:"hotel",city:"Kyoto",coordinates:{lat:35.0003,lon:135.7797},description:"Intimate luxury 5-star ryokan.",url:"https://www.ishibekojimuan.com/",tags:["Ryokan","Luxury","Historic","Hinoki Bath"],hotelMeta:{address:"463-10 Shimokawara-cho, Higashiyama-ku, Kyoto 605-0825, Japan",directions:"https://www.google.com/maps/dir/?api=1&destination=35.0003,135.7797&travelmode=transit",neighborhoodInsights:"Located in atmospheric Ishibe-koji.",tags:["Ryokan","Luxury","Historic","Hinoki Bath"]}},"nanxiang-bun":{id:"nanxiang-bun",name:"Nanxiang Steamed Bun (南翔馒头店)",type:"food",city:"Shanghai",coordinates:{lat:31.2272,lon:121.4921},description:"Iconic xiaolongbao in Yu Garden.",url:"https://guide.michelin.com/en/shanghai-municipality/shanghai/restaurant/nanxiang-steamed-bun-city-god-temple",tags:["Old City","Touristy but iconic"]},"teamlab-planets":{id:"teamlab-planets",name:"TeamLab Planets (チームラボプラネッツ)",type:"sight",city:"Tokyo",coordinates:{lat:35.6457,lon:139.7892},description:"Immersive water-themed digital art.",url:"https://planets.teamlab.art/tokyo/",tags:["Art","Interactive","Indoor"]},"shibuya-sky":{id:"shibuya-sky",name:"Shibuya Sky (渋谷スカイ)",type:"sight",city:"Tokyo",coordinates:{lat:35.6585,lon:139.7023},description:"Open-air deck above the Scramble.",url:"https://www.shibuya-scramble-square.com/sky/",tags:["Views","Rooftop","Sunset"]},"nezu-museum":{id:"nezu-museum",name:"Nezu Museum (根津美術館)",type:"sight",city:"Tokyo",coordinates:{lat:35.6622,lon:139.7188},description:"Private art collection and garden.",url:"https://www.nezu-muse.or.jp/en/",tags:["Garden","Architecture","Art"]},"pontocho-alley":{id:"pontocho-alley",name:"Pontocho Alley (先斗町)",type:"sight",city:"Kyoto",coordinates:{lat:35.0049,lon:135.7712},description:"Historic narrow dining alley.",url:"https://www.japan-guide.com/e/e3921.html",tags:["Dining","Atmospheric","Night"]},"todai-ji":{id:"todai-ji",name:"Todai-ji Temple (東大寺)",type:"sight",city:"Kyoto",coordinates:{lat:34.689,lon:135.8398},description:"Giant Buddha statue in Nara.",url:"https://www.todaiji.or.jp/en/",tags:["Great Buddha","Historic","Temple"]},"umeda-sky":{id:"umeda-sky",name:"Umeda Sky Building (梅田スカイビル)",type:"sight",city:"Osaka",coordinates:{lat:34.7053,lon:135.4897},description:"Floating Garden Observatory.",url:"https://www.skybldg.co.jp/en/",tags:["Architecture","Views","Sunset"]},"kuromon-market":{id:"kuromon-market",name:"Kuromon Market (黒門市場)",type:"food",city:"Osaka",coordinates:{lat:34.6653,lon:135.5074},description:"Osaka's fresh seafood market hub.",url:"https://kuromon.com/en/",tags:["Seafood","Street Food","Market"]},"jingan-temple":{id:"jingan-temple",name:"Jing'an Temple (静安寺)",type:"sight",city:"Shanghai",coordinates:{lat:31.223,lon:121.446},description:"Golden Buddhist temple in the city centre.",url:"https://www.meet-in-shanghai.net/scenic-spots/jingan-temple",tags:["Temple","Gold","Architecture"]},tianzifang:{id:"tianzifang",name:"Tianzifang (田子坊)",type:"sight",city:"Shanghai",coordinates:{lat:31.209,lon:121.464},description:"Artistic labyrinth of boutiques.",url:"https://www.meet-in-shanghai.net/scenic-spots/tianzifang",tags:["Shopping","Artsy","Crowded"]},"rice-bar":{id:"rice-bar",name:"Rice Bar (ライスバー)",type:"bar",city:"Shanghai",coordinates:{lat:31.2031,lon:121.4256},description:"Japanese-themed social lounge.",url:"https://www.smartshanghai.com/venue/5856/rice_bar",tags:["Lounge","Friendly"]},"ren-he-guan":{id:"ren-he-guan",name:"Ren He Guan (人和馆)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2035,lon:121.4565},description:"Excellent Shanghainese home cooking.",url:"https://guide.michelin.com/en/shanghai-municipality/shanghai/restaurant/ren-he-guan-zhaojiabang-road",tags:["Shanghainese","Michelin Star","Home Cooking"]},"gion-tanto":{id:"gion-tanto",name:"Gion Tanto (祇園たんと)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0055,lon:135.7735},description:"Popular riverside okonomiyaki in Gion.",url:"http://www.gion-tanto.com/",tags:["Okonomiyaki","Gion","Riverside"]},"omen-udon":{id:"omen-udon",name:"Omen (おめん)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.026,lon:135.7954},description:"Renowned udon restaurant near Ginkaku-ji.",url:"https://www.omen.co.jp/en/",tags:["Udon","Traditional","Ginkaku-ji"]},"ichiran-kyoto":{id:"ichiran-kyoto",name:"Ichiran Ramen (一蘭)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.003,lon:135.768},description:"Famous tonkotsu ramen with solo booths.",url:"https://en.ichiran.com/",tags:["Tonkotsu Ramen","Solo Booths","Customisable"]},"engine-ramen":{id:"engine-ramen",name:"Engine Ramen (エンジンラーメン)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0056,lon:135.7675},description:"Modern ramen shop with vegan options.",url:"https://www.engineramen.com/",tags:["Vegan Ramen","Modern","Downtown"]},"honke-daiichi-asahi":{id:"honke-daiichi-asahi",name:"Honke Daiichi Asahi (本家 第一旭)",type:"matts Tips",city:"Kyoto",coordinates:{lat:34.9856,lon:135.7602},description:"Historic shop for classic Kyoto soy ramen.",url:"https://www.honke-daiichiasahi.com/",tags:["Soy Ramen","Breakfast","Kyoto Station"]},"yakiniku-hiro":{id:"yakiniku-hiro",name:"Yakiniku Hiro (京の焼肉処 弘)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.009,lon:135.77},description:"High-quality Japanese wagyu BBQ.",url:"https://yakiniku-hiro.com/english/",tags:["Wagyu","BBQ","Gion"]},"yakiniku-kua":{id:"yakiniku-kua",name:"Yakiniku-Kua (焼肉 摠)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0033,lon:135.7758},description:"Small atmospheric grilled meat specialist.",url:"https://yakiniku-kua.com/",tags:["Grilled Meat","Local","Atmospheric"]},"roan-kikunoi":{id:"roan-kikunoi",name:"Roan Kikunoi (露庵 菊乃井)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0033,lon:135.7709},description:"Michelin-starred seasonal kaiseki cuisine.",url:"https://kikunoi.jp/english/roan/",tags:["Kaiseki","Michelin","Traditional"]},"gion-sushi-matsumoto":{id:"gion-sushi-matsumoto",name:"Gion Sushi Matsumoto (祇園 鮨 まつもと)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.002,lon:135.7766},description:"Traditional Edomae sushi omakase.",url:"https://sushimatsumoto.com/",tags:["Sushi","Omakase","High-end"]},"sushi-tetsu":{id:"sushi-tetsu",name:"Sushi Tetsu (すしてつ)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.008,lon:135.77},description:"Budget-friendly sushi in Pontocho.",url:"http://www.sushitetsu.jp/",tags:["Affordable Sushi","Pontocho","Casual"]},"gyoza-nakajima":{id:"gyoza-nakajima",name:"Gyoza Nakajima (ぎょうざ処 亮昌)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0016,lon:135.7577},description:"Local Kyoto gyoza with seasonal ingredients.",url:"https://www.nakajimagyoza.com/",tags:["Gyoza","Local Ingredients","Budget"]},"chao-chao-gyoza":{id:"chao-chao-gyoza",name:"Chao Chao Gyoza (餃々)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0048,lon:135.7711},description:"Award-winning thin-skin gyoza specialty shop.",url:"https://www.gyozaya.com/english/",tags:["Gyoza","Variety","Casual"]},"katsukura-tonkatsu":{id:"katsukura-tonkatsu",name:"Katsukura Tonkatsu Sanjo (名代とんかつ かかつくら)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0087,lon:135.767},description:"Top-rated crispy tonkatsu restaurant.",url:"https://www.katsukura.jp/en/",tags:["Tonkatsu","Sanjo","Specialty"]},"gohan-ya-isshin":{id:"gohan-ya-isshin",name:"Gohan Ya Isshin (ごはんや一芯)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.008,lon:135.768},description:"Stylish restaurant for traditional washoku sets.",url:"https://isshin-kyoto.gorp.jp/",tags:["Washoku","Lunch Sets","Trendy"]},"matcha-house":{id:"matcha-house",name:"Matcha House (抹茶館)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.0045,lon:135.769},description:"Famous for its matcha tiramisu.",url:"https://maccha-house.com/en/",tags:["Tiramisu","Matcha","Social Media Famous"]},"kirukan-okamoto":{id:"kirukan-okamoto",name:"Kirukan Okamoto (空海山 岡本)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.013,lon:135.766},description:"Izakaya specialising in Japanese fried chicken.",url:"http://karaage-okamoto.com/",tags:["Karaage","Japanese Fried Chicken","Izakaya"]},"nishiki-market-tips":{id:"nishiki-market-tips",name:"Nishiki Market (錦市場)",type:"matts Tips",city:"Kyoto",coordinates:{lat:35.005,lon:135.7649},description:"Iconic retail market for local Kyoto specialities.",url:"https://www.kyoto-nishiki.or.jp/",tags:["Street Food","Market","Traditional"]},"camellia-tea-house":{id:"camellia-tea-house",name:"Camellia Tea House (茶道体験 カメリア)",type:"matts Tips",city:"Kyoto",coordinates:{lat:34.9977,lon:135.7818},description:"Cultural tea ceremony experience near Ninenzaka.",url:"https://tea-kyoto.com/",tags:["Tea Ceremony","Cultural","Ninenzaka"]},"tonkatsu-daiki":{id:"tonkatsu-daiki",name:"Tonkatsu Daiki (とんかつ 大喜)",type:"matts Tips",city:"Osaka",coordinates:{lat:34.671,lon:135.505},description:"Popular local tonkatsu spot in Shinsaibashi.",url:"https://tatsudaiki.com/",tags:["Tonkatsu","Shinsaibashi","Local Gem"]},"osaka-wonder-cruise":{id:"osaka-wonder-cruise",name:"Osaka Wonder Cruise (大阪ワンダークルーズ)",type:"sight",city:"Osaka",coordinates:{lat:34.6687,lon:135.5011},description:"Scenic boat cruise along the Dotonbori canal and Osaka waterways.",url:"https://www.wondercruise.jp/en/",tags:["Boat Tour","River Views","Dotonbori"]},"m50-creative-park-shanghai":{id:"m50-creative-park-shanghai",name:"M50 Creative Park (M50创意园)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2475,lon:121.4475},description:"Contemporary art district situated in former textile mills along the Suzhou Creek, housing over 100 artist studios and galleries.",url:"http://www.m50.com.cn",tags:["Art","Culture"]},"xiaotaoyuan-shanghai":{id:"xiaotaoyuan-shanghai",name:"Xiaotaoyuan (小桃园)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2131,lon:121.4524},description:"Specialist in traditional Shanghainese 'Four King Kong' breakfast items, including fried dough sticks, soy milk, and rice balls.",tags:["Breakfast","Traditional"]},"xiejia-courtyard-shanghai":{id:"xiejia-courtyard-shanghai",name:"Xiejia Courtyard (谢家大院)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.235521,lon:121.486512},description:"Preserved late-Qing dynasty courtyard residence featuring traditional Jiangnan architecture, located near the Bund.",tags:["Historic Site","Architecture"]},"yangs-fried-dumpling-shanghai":{id:"yangs-fried-dumpling-shanghai",name:"Yang's Fried Dumpling (小杨生煎)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2395,lon:121.4825},description:"Prominent chain specialising in shengjianbao (pan-fried buns) known for thin skins and substantial soup content.",url:"https://www.google.com/maps/search/?api=1&query=Yang's+Fried+Dumpling+Shanghai",tags:["Dumplings","Local Eats"]},"savoy-kaminarimon-tokyo":{id:"savoy-kaminarimon-tokyo",name:"Savoy Kaminarimon (SAVOY雷門店)",type:"cesar Tips",city:"Tokyo",coordinates:{lat:35.710755,lon:139.796552},description:"Asakusa outpost of the acclaimed Neapolitan pizza specialist, featuring wood-fired ovens and a counter-seating format.",url:"https://www.google.com/maps/search/?api=1&query=Savoy+Kaminarimon+Tokyo",tags:["Pizza","Italian"]},"dahuchun-shanghai":{id:"dahuchun-shanghai",name:"Dahuchun (大壶春)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2344,lon:121.4854},description:"Time-honored brand established in 1932, serving traditional thick-skinned, yeast-leavened pan-fried pork buns.",url:"https://www.google.com/maps/search/?api=1&query=Dahuchun+Shanghai",tags:["Chinese Restaurant","Pan-fried Buns"]},"quanjude-shanghai":{id:"quanjude-shanghai",name:"Quanjude (全聚德)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2347,lon:121.4746},description:"Branch of the historic Beijing institution founded in 1864, renowned for authentic charcoal-roasted Peking Duck.",tags:["Peking Duck","Historic"]},"shen-shen-bakery-shanghai":{id:"shen-shen-bakery-shanghai",name:"Shen Shen Bakery (申申面包店)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2011,lon:121.4564},description:"Local bakery specialising in retro-style Shanghainese pastries and fresh cream breads.",tags:["Bakery","Pastries"]},"long-time-ago-mutton-chuan-changli-rd-shanghai":{id:"long-time-ago-mutton-chuan-changli-rd-shanghai",name:"Long Time Ago Mutton Chuan (很久以前羊肉串)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.1734,lon:121.4914},description:"Barbecue specialist featuring automated charcoal grills and mutton sourced from Inner Mongolia.",url:"https://www.dianping.com/shop/G92045542",tags:["BBQ","Late Night"]},"long-time-ago-mutton-chuan-dapu-rd-shanghai":{id:"long-time-ago-mutton-chuan-dapu-rd-shanghai",name:"Long Time Ago Mutton Chuan (很久以前羊肉串)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.201521,lon:121.474512},description:"Automated charcoal barbecue chain known for Inner Mongolian mutton skewers and immersive interior design.",tags:["Barbecue","Chinese Cuisine"]},"yuxing-ji-shanghai":{id:"yuxing-ji-shanghai",name:"Yuxing Ji (裕兴记)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2285,lon:121.4585},description:"Suzhou-style noodle house specialising in high-end seasonal toppings, including crab fat and shrimp roe.",tags:["Noodles","Suzhou Cuisine"]},"yuxing-ji-noodle-restaurant-shanghai":{id:"yuxing-ji-noodle-restaurant-shanghai",name:"Yuxing Ji Noodle Restaurant (裕兴记面馆)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.234512,lon:121.479543},description:"Renowned destination for authentic Suzhou 'Sanxia' noodles and traditional hand-stripped crab meat toppings.",tags:["Noodle Shop","Suzhou Cuisine"]},"lailai-snack-dumpling-shanghai":{id:"lailai-snack-dumpling-shanghai",name:"Lailai Snack Dumpling (莱莱小吃汤包馆)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2385,lon:121.4782},description:"Bib Gourmand eatery specialising in premium crab-meat xiaolongbao and seasonal Shanghainese snacks.",tags:["Dumplings","Local Eats"]},"harmay-shanghai":{id:"harmay-shanghai",name:"Harmay (话梅)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.2105,lon:121.4425},description:"Industrial-aesthetic retail warehouse offering a curated selection of international beauty brands and samples.",url:"https://www.harmay.com/",tags:["Cosmetics","Retail"]},"jia-jia-tang-bao-shanghai":{id:"jia-jia-tang-bao-shanghai",name:"Jia Jia Tang Bao (佳家汤包)",type:"cesar Tips",city:"Shanghai",coordinates:{lat:31.234544,lon:121.471518},description:"Celebrated xiaolongbao specialist known for thin-skinned soup dumplings made to order.",tags:["Soup Dumplings","Local Favorite"]},"yuyuan-public-market-shanghai":{id:"yuyuan-public-market-shanghai",name:"Yuyuan Public Market (愚园公共市集)",type:"sight",city:"Shanghai",coordinates:{lat:31.2195,lon:121.4255},description:"A revitalized community space featuring local food stalls, art galleries, and daily services in a historic neighborhood.",tags:["Market","Community"]},"nintendo-museum-uji":{id:"nintendo-museum-uji",name:"Nintendo Museum (ニンテンドーミュージアム)",type:"Nintendo",city:"Kyoto",coordinates:{lat:34.8905,lon:135.7931},description:"Housed in the former Uji Ogura Plant, this facility documents the company's transition from a hanafuda playing card manufacturer to a digital entertainment developer through interactive exhibits.",url:"https://museum.nintendo.com/en/",tags:["Museum","Gaming"]},"marufukuro-kyoto":{id:"marufukuro-kyoto",name:"Marufukuro (丸福樓)",type:"Nintendo",city:"Kyoto",coordinates:{lat:34.9915,lon:135.7655},description:"Occupying the 1933 Art Deco headquarters of the Yamauchi Nintendo playing card company, this boutique hotel preserves original architectural elements and historical archives within the Shimogyo Ward.",url:"https://marufukuro.com/en/",tags:["Boutique Hotel","Historic Landmark"]},"nintendo-tokyo-shibuya":{id:"nintendo-tokyo-shibuya",name:"Nintendo Tokyo (ニンテンドートウキョウ)",type:"Nintendo",city:"Tokyo",coordinates:{lat:35.662,lon:139.6985},description:"Situated within the Shibuya PARCO complex, this inaugural official retail outlet in Japan stocks exclusive merchandise and features interactive installations themed around the company's software franchises.",url:"https://www.nintendo.co.jp/officialstore/",tags:["Retail","Gaming"]},"kirby-cafe-tokyo":{id:"kirby-cafe-tokyo",name:"Kirby Café (カービィカフェ)",type:"Nintendo",city:"Tokyo",coordinates:{lat:35.7101,lon:139.8107},description:"This themed restaurant located within Tokyo Skytree Town serves a menu inspired by the Nintendo video game franchise Kirby.",url:"https://kirbycafe.jp/",tags:["Themed Dining","Video Games"]},"kirby-cafe-osaka":{id:"kirby-cafe-osaka",name:"Kirby Café Osaka (カービィカフェ OSAKA)",type:"Nintendo",city:"Osaka",coordinates:{lat:34.6735,lon:135.5013},description:"Opened in 2024 on the ninth floor of the Daimaru Shinsaibashi department store, this permanent themed restaurant serves character-inspired cuisine based on the Nintendo video game franchise.",url:"https://kirbycafe.jp/",tags:["Theme Restaurant","Gaming"]},"fushimi-inari-taisha-kyoto":{id:"fushimi-inari-taisha-kyoto",name:"Fushimi Inari Taisha (伏見稲荷大社)",type:"Nintendo",city:"Kyoto",coordinates:{lat:34.9671,lon:135.7727},description:"Established in 711, this head shrine of Inari features thousands of vermilion torii gates and served as the visual inspiration for the fox statues and level design in the Star Fox video game series.",url:"http://inari.jp/en/",tags:["Shinto Shrine","Landmark"]},"nintendo-osaka-osaka":{id:"nintendo-osaka-osaka",name:"Nintendo OSAKA (ニンテンドーオオサカ)",type:"Nintendo",city:"Osaka",coordinates:{lat:34.702485,lon:135.495957},description:"Official retail outlet located on the 13th floor of the Daimaru Umeda building, retailing exclusive merchandise, hardware, and software from the Kyoto-based video game developer.",url:"https://www.nintendo.co.jp/officialstore/",tags:["Shopping","Gaming"]},"nintendo-kyoto-kyoto":{id:"nintendo-kyoto-kyoto",name:"Nintendo KYOTO (ニンテンドーキョウト)",type:"Nintendo",city:"Kyoto",coordinates:{lat:35.003645,lon:135.768711},description:"Official retail outlet situated on the seventh floor of Kyoto Takashimaya S.C. [T8] featuring exclusive merchandise and character-themed installations.",url:"https://www.nintendo.co.jp/officialstore/",tags:["Retail","Gaming"]},"nintendo-hq-kyoto":{id:"nintendo-hq-kyoto",name:"Nintendo HQ (任天堂本社)",type:"Nintendo",city:"Kyoto",coordinates:{lat:34.9691,lon:135.7562},description:"Located in Minami Ward, this minimalist white building serves as the global corporate headquarters for the multinational video game company established in 1889.",url:"https://www.nintendo.co.jp/corporate/en/",tags:["Corporate","Landmark"]}},Di=new Date("2025-02-18"),Ki=new Date("2025-02-28"),Mi=[{dayNumber:1,city:"Tokyo",theme:"Neon Lights & First Bites",date:"Wed 18 Feb",hotelId:"hilton-tokyo",activities:[{placeId:"haneda-airport",time:"10:25",label:"Arrival",icon:"🛬"},{placeId:"shinjuku-gyoen",time:"Day",label:"Shinjuku & Garden",description:"Transfer to Shinjuku (Hotel Shuttle). Lunch at Sobahouse Konjiki Hototogisu. (Backup: Ramen Tatsunoya). Walk through Shinjuku Gyoen.",tip:"Konjiki Hototogisu holds a Michelin Star. If the queue is too long Tatsunoya is a high-quality nearby alternative.",icon:"🌳"},{placeId:"torikizoku",time:"Evening",label:"Dinner",description:"Dinner at Torikizoku (Yakitori) or the atmospheric Omoide Yokocho.",tip:"Torikizoku is a reliable chain where every item is the same price—great for a low-stress first meal.",icon:"🍢"}]},{dayNumber:2,city:"Tokyo",theme:"Temples, Tuna & Two-Chōme",date:"Thu 19 Feb",hotelId:"hilton-tokyo",activities:[{placeId:"senso-ji",time:"Morning",label:"Senso-ji Temple",tip:"Try the Ningyo-yaki (doll-shaped sponge cakes) on Nakamise street.",icon:"⛩️"},{placeId:"tsukiji-market",time:"Lunch",label:"Tsukiji & Palace",description:"Lunch at Tsukiji Outer Market (closes 2pm). Then walk it off at Imperial Palace East Gardens.",tip:"At Tsukiji, look for the queues at Sushizanmai for reliable quality.",icon:"🍣"},{placeId:"shinjuku-nichome",time:"Evening",label:"Shinjuku Ni-chōme",description:"Dinner at Ramen Nagi (Golden Gai). Then explore Shinjuku Ni-chōme.",tip:"Ramen Nagi is legendary for its intense Niboshi (sardine) broth.",icon:"🍸"}]},{dayNumber:3,city:"Tokyo",theme:"Scrambles, Skylines & Sushi",date:"Fri 20 Feb",hotelId:"hilton-tokyo",activities:[{placeId:"tokyo-metro-gov",time:"Morning",label:"Tokyo Metro Gov. Building",description:"Views from Tokyo Metro Gov. Building (Shinjuku).",tip:"The South Observatory is often less crowded than the North one.",icon:"🏙️"},{placeId:"fuunji",time:"Lunch",label:"Fuunji",description:"Lunch at Fuunji (Shinjuku).",tip:"Known for the best Tsukemen (dipping noodles) in Tokyo. Expect a line, but it moves fast!",icon:"🍜"},{placeId:"shibuya-crossing",time:"Afternoon",label:"Harajuku & Shibuya",description:"Walk Takeshita Street (Harajuku). End at Shibuya Crossing/Shibuya Sky for sunset.",tip:"Shibuya Sky (rooftop) offers the best views of the crossing but requires booking ~2 weeks in advance.",icon:"📸"},{placeId:"sushi-kunimitsu",time:"Dinner",label:"Sushi",description:"Authentic sushi at Sushi Kunimitsu or Osushiya Taiki.",tip:"Kunimitsu is highly rated (4.7★) for its Omakase course. Booking essential.",icon:"🍣"}]},{dayNumber:4,city:"Tokyo",theme:"The Shinkansen Sprint",date:"Sat 21 Feb",hotelId:"hilton-tokyo",activities:[{placeId:"shinjuku-station",time:"Morning",label:"Travel to Kyoto",description:"Checkout. Train to Tokyo Station. Shinkansen to Kyoto (2.5 hrs).",tip:"Buy a Bento at Tokyo Station.",icon:"🚅"}]},{dayNumber:4,city:"Kyoto",theme:"Geisha Streets & Kaiseki Eats",date:"Sat 21 Feb",hotelId:"ishibekoji-muan",activities:[{placeId:"kyoto-station",time:"Morning",label:"Arrival",description:"Arrive at Kyoto Station. Taxi to Ishibekoji Muan (approx. 20 mins).",tip:"Muan is in a pedestrian-only historic zone; taxi drops you at the entrance of Ishibe-koji lane.",icon:"📍"},{placeId:"gion-district",time:"Afternoon",label:"Gion District",description:"Explore Gion District and Pontocho Alley.",tip:"Walk from Shijo-dori across the river to Pontocho.",icon:"🍵"},{placeId:"gion-district",time:"Dinner",label:"Kyo-Kaiseki meal",description:"Traditional Kyo-Kaiseki meal in Gion.",tip:"If not booked, wander down Pontocho Alley for atmospheric river-side dining.",icon:"🍱"}]},{dayNumber:5,city:"Kyoto",theme:"Torii Gates & Deer Dates",date:"Sun 22 Feb",hotelId:"ishibekoji-muan",activities:[{placeId:"fushimi-inari",time:"Morning",label:"Fushimi Inari Taisha",description:"Visit Fushimi Inari early. Then take JR Nara Line to Nara.",tip:"Arriving by 8:00 AM avoids the massive crowds.",icon:"⛩️"},{placeId:"todai-ji",time:"Day",label:"Nara Deer Park",description:"Visit Todai-ji Temple and feed the deer at Nara Park. Return to Kyoto.",tip:"Don't carry open food—the deer can be aggressive!",icon:"🦌"},{placeId:"honke-daiichi",time:"Dinner",label:"Honke Daiichi-Asahi",description:"Dinner at Honke Daiichi-Asahi near Kyoto Station.",tip:"A Kyoto institution serving classic soy-based ramen.",icon:"🍜"}]},{dayNumber:6,city:"Kyoto",theme:"Bamboo Groves & Market Troves",date:"Mon 23 Feb",hotelId:"ishibekoji-muan",activities:[{placeId:"arashiyama",time:"Morning",label:"Arashiyama Bamboo",description:"Train to Arashiyama (Bamboo Grove). Visit Tenryu-ji Temple.",tip:"Go as early as possible for the best photos.",icon:"🎋"},{placeId:"nishiki-market",time:"Lunch",label:"Nishiki Market",description:"Return to central Kyoto for lunch at Nishiki Market.",tip:"Try the Tako Tamago (red baby octopus with a quail egg inside).",icon:"🐙"},{placeId:"kiyomizu-dera",time:"Afternoon",label:"Kiyomizu-dera",description:"Visit Kiyomizu-dera Temple. Walk down Sannenzaka.",tip:"Great spot for sunset views over the city.",icon:"🍂"}]},{dayNumber:7,city:"Kyoto",theme:"Bound for the Kitchen",date:"Tue 24 Feb",hotelId:"ishibekoji-muan",activities:[{placeId:"kyoto-station",time:"Morning",label:"Travel to Osaka",description:"Checkout. Special Rapid Service to Osaka Station (30 mins).",tip:"Stand on the platform early to secure a seat.",icon:"🚆"}]},{dayNumber:7,city:"Osaka",theme:"Castles, Crabs & Doyama Nights",date:"Tue 24 Feb",hotelId:"hilton-osaka",activities:[{placeId:"osaka-station",time:"Morning",label:"Arrival",description:"Arrive at Osaka Station. Drop bags at Hilton Osaka.",tip:"Hotel is located across from the Central North (Sakurabashi) Exit.",icon:"📍"},{placeId:"osaka-castle",time:"Morning",label:"Osaka Castle",description:"Visit Osaka Castle.",tip:"Hotel is at Umeda; Castle is a short loop line ride away.",icon:"🏯"},{placeId:"kushikatsu-daruma",time:"Day",label:"Dotonbori & Shinsekai",description:"Lunch at Kushikatsu Daruma. Eat through Dotonbori and retro Shinsekai.",tip:'Famous for "no double dipping" fried skewers.',icon:"🦀"},{placeId:"doyama-cho",time:"Evening",label:"Dōyama-chō",description:"Visit Dōyama-chō (Gay District) - walking distance from Hilton.",tip:"Umeda is the main gay area in Osaka.",icon:"🏳️‍🌈"},{placeId:"fukutaro",time:"Dinner",label:"Okonomiyaki",description:"Okonomiyaki at Fukutaro or Ajinoya Honten.",tip:"Order the Negiyaki (green onion pancake) at Fukutaro.",icon:"🥞"}]},{dayNumber:8,city:"Osaka",theme:"Wings to China",date:"Wed 25 Feb",hotelId:"hilton-osaka",activities:[{placeId:"kansai-airport",time:"Morning",label:"Travel to KIX & Fly",description:"Train/Bus to Kansai Airport. Flight to Shanghai (PVG).",tip:"Allow 60-75 mins for transit to KIX.",icon:"🛫"}]},{dayNumber:8,city:"Shanghai",theme:"Maglev Speed & Metropolis",date:"Wed 25 Feb",hotelId:"hilton-shanghai",activities:[{placeId:"maglev-station",time:"Afternoon",label:"Arrival & Maglev",description:"Land at PVG. Maglev to Longyang Rd; Metro to Hotel.",tip:"Maglev top speed (430km/h) usually 9:00-10:45 & 15:00-15:45.",icon:"🚄"}]},{dayNumber:9,city:"Shanghai",theme:"Beto's Birthday Bash 🎂",date:"Thu 26 Feb",hotelId:"hilton-shanghai",activities:[{placeId:"tianzifang",time:"Morning",label:"French Concession",description:"Walk the French Concession. Explore Tianzifang.",tip:"Tianzifang is a maze of shikumen lanes filled with arts, crafts, and cafes.",icon:"🌳"},{placeId:"jianguo-328",time:"Lunch",label:"Jianguo 328",description:"Lunch at Jianguo 328 (French Concession).",tip:"Bib Gourmand favorite for MSG-free home-style cooking.",icon:"🥟"},{placeId:"fu-1039",time:"Dinner",label:"Fu 1039 or Fu He Hui",description:"Fu 1039 (Classic) or Fu He Hui (Veg).",tip:"Fu 1039 (1 Michelin Star) for Smoked Fish. Fu He Hui (2 Michelin Stars) for world-class vegetarian.",icon:"🥢"},{placeId:"rice-bar",time:"Evening",label:"Rice Bar & HUNT",description:"Relaxed pre-drinks at Rice Bar followed by dancing at HUNT.",tip:"Rice Bar is a cozy, long-standing Japanese-style gay lounge. It is very close to HUNT, making it the perfect warm-up spot.",icon:"🍸🕺"}]},{dayNumber:10,city:"Shanghai",theme:"Gardens, Giants & The Bund",date:"Fri 27 Feb",hotelId:"hilton-shanghai",activities:[{placeId:"yu-garden",time:"Morning",label:"Yu Garden & Bazaar",description:"Explore Yu Garden and the Old City Bazaar.",icon:"🏮"},{placeId:"nanxiang-bun",time:"Lunch",label:"Nanxiang Steamed Bun",description:"Lunch at Nanxiang Steamed Bun Restaurant inside Yu Garden.",tip:"Famous for Xiao Long Bao. Takeaway line is long; upstairs seating is faster.",icon:"🥟"},{placeId:"shanghai-tower",time:"Afternoon",label:"Shanghai Tower",description:"Visit the observation deck of China's tallest building.",tip:"Book tickets in advance to skip the queue.",icon:"🏙️"},{placeId:"the-bund",time:"Evening",label:"The Bund",description:"Walk The Bund.",tip:"Best views are just after sunset when the lights turn on.",icon:"🌃"},{placeId:"old-jesse",time:"Dinner",label:"Old Jesse",description:"Old Jesse.",tip:"Pre-order the Hong Shao Rou and Scallion Roasted Fish Head when booking!",icon:"🍽️"}]},{dayNumber:11,city:"Shanghai",theme:"Dumplings & Departure",date:"Sat 28 Feb",hotelId:"hilton-shanghai",activities:[{placeId:"maglev-station",time:"Morning",label:"MAGLEV to PVG",description:"Ride MAGLEV to PVG. Access First Class Lounge.",tip:"Morning trains run at 300km/h. The 430km/h service starts at 09:00 (too late for 10:55 flight).",icon:"🚄"},{placeId:"yangs-dumplings",time:"Snack",label:"Yang's Dumplings",description:"Yang's Dumplings inside airport.",tip:"Bite a small hole in the Sheng Jian Bao first to vent the steam!",icon:"🥟"},{placeId:"pudong-airport",time:"10:55",label:"Return Flight",description:"British Airways BA0168 to London (LHR).",tip:"Departs Terminal 2.",icon:"🛫"}]}],di={Tokyo:"#C2185B",Kyoto:"#558B2F",Osaka:"#E65100",Shanghai:"#0097A7"},ui={hotel:"#ff9100",food:"#ff0033",sight:"#39ff14",travel:"#00e5ff",suggestion:"#bc13fe",shopping:"#ffffff",bar:"#1f51ff",default:"#e0e0e0","cesar Tips":"#bc13fe","matts Tips":"#bc13fe","maria Tips":"#bc13fe",Nintendo:"#bc13fe"},Ei=[{title:"🇯🇵 Drugstores (Matsumoto Kiyoshi / Welcia)",items:[{name:"Lululun Face Masks",notes:"Specifically the 'balancing' pink types."},{name:"Perfect Whip Cleanser",notes:"Pink version (collagen) is recommended."},{name:"Anessa Sunscreen",notes:"Gold bottle, roll-on or milk."},{name:"Rohto Lycée Eye Drops",notes:"Whitening and clearing eyes."},{name:"Shiseido Elixir",notes:"Creams and retinol products."},{name:"Zero Spot Patches",notes:"For acne/pimples."}]},{title:"🇯🇵 Convenience Stores (7-Eleven / Lawson)",items:[{name:"Onigiri",notes:"Tuna with mayonnaise flavour is recommended."},{name:"Pocky Almond Crush",notes:"Classic crunchy chocolate snack."},{name:"Kanro Pure Premium Gummies",notes:"Popular fruit gummy candy."}]},{title:"🇯🇵 Souvenirs & Brands",items:[{name:"Matcha Kit",notes:"High-quality ceremonial matcha, whisk, and bowl."},{name:"Yojiya",notes:"Kyoto-based brand (rice-based products)."},{name:"Kimono/Yukata",notes:"Traditional Japanese garment, casual summer kimono."},{name:"Japanese Sweets",notes:"Assortment of mochi, KitKats, Pocky, and regional snacks."},{name:"Daruma Doll",notes:"Traditional hollow, round, Japanese doll (good luck charm)."}]},{title:"Travel",items:[{name:"Visit Japan Web",notes:'<a href="https://www.vjw.digital.go.jp/">Entry QR Code</a>'},{name:"Tokyo Transport",notes:"Purchase a Suica or Pasmo IC card immediately for seamless travel on all metro and JR lines."},{name:"Kyoto Logistics",notes:"City buses are frequently gridlocked; prioritise the subway and JR lines for Arashiyama and Fushimi Inari."},{name:"Osaka Navigation",notes:"The Midosuji Line is the primary north-south artery connecting Umeda and Namba; avoid surface transit."},{name:"Shanghai Metro",notes:"Link an international card to Alipay or WeChat Pay to generate transport QR codes; physical tickets are obsolete."}]},{title:"Food Lists",items:[{name:"Ceasaer's List",notes:'<a href="https://maps.app.goo.gl/SrgwDH11qfo9mrMM8">Shanghai Eats</a>'}]}],ki="https://docs.google.com/spreadsheets/d/e/2PACX-1vRniSOAatP5VkPcJar3i-lMab0sZxPd3Q5td67o9kig_Zc9ZgjR4mCWL78dWHnxy0Yr9HAHdUxskKwb/pub?gid=1152874887&single=true&output=csv",fi="https://docs.google.com/spreadsheets/d/e/2PACX-1vRniSOAatP5VkPcJar3i-lMab0sZxPd3Q5td67o9kig_Zc9ZgjR4mCWL78dWHnxy0Yr9HAHdUxskKwb/pub?gid=1332892089&single=true&output=csv",wi="https://docs.google.com/spreadsheets/d/e/2PACX-1vRniSOAatP5VkPcJar3i-lMab0sZxPd3Q5td67o9kig_Zc9ZgjR4mCWL78dWHnxy0Yr9HAHdUxskKwb/pub?gid=1754683644&single=true&output=csv",bi="https://docs.google.com/spreadsheets/d/e/2PACX-1vRniSOAatP5VkPcJar3i-lMab0sZxPd3Q5td67o9kig_Zc9ZgjR4mCWL78dWHnxy0Yr9HAHdUxskKwb/pub?gid=489356129&single=true&output=csv",li=async D=>{if(!D)throw new Error("URL not provided");const G=await fetch(D);if(!G.ok)throw new Error(`Failed to fetch CSV: ${G.statusText}`);const X=await G.text();return new Promise((T,Q)=>{Ai.parse(X,{header:!0,skipEmptyLines:!0,transformHeader:B=>B.trim().replace(/^\ufeff/,""),complete:B=>T(B.data),error:B=>Q(B)})})};self.onmessage=async()=>{const D={places:ci,itinerary:Mi,startDate:Di,endDate:Ki,theme:{cityColors:di,markerColors:ui},tips:Ei};try{let G={},X={cityColors:di,markerColors:ui};const[T,Q]=await Promise.all([ki?li(ki):Promise.resolve([]),wi?li(wi):Promise.resolve([])]);try{const v={},N={};T.forEach(a=>{if(!a.id)return;const j={id:a.id,name:a.name,type:a.type,city:a.city,coordinates:{lat:parseFloat(a.lat),lon:parseFloat(a.lon)},description:a.description,url:a.url||void 0,tags:a.tags?a.tags.split(",").map(O=>O.trim()):[],hotelMeta:a.type==="hotel"&&a.address?{address:a.address,directions:a.directions,neighborhoodInsights:a.neighborhoodInsights,tags:a.tags?a.tags.split(",").map(O=>O.trim()):[]}:void 0};v[a.id]=j,j.type==="hotel"&&(N[a.id]=j)}),Object.keys(v).length>0&&(G=v);const n=Object.keys(N).length>0?N:G;D.places=G;try{const a={...di},j={...ui};let O=!1;Q.forEach(w=>{w.category==="city"&&w.key&&w.value?(a[w.key]=w.value,O=!0):w.category==="marker"&&w.key&&w.value&&(j[w.key]=w.value,O=!0)}),O&&(X={cityColors:a,markerColors:j})}catch(a){console.warn("Failed to load Theme CSV for initial load in worker, using fallback.",a)}self.postMessage({type:"INITIAL_DATA_READY",data:{places:n,theme:X}})}catch(v){console.warn("Failed to load Places CSV for initial load in worker, using fallback.",v);const N={};Object.values(ci).forEach(a=>{a.type==="hotel"&&(N[a.id]=a)});const n=Object.keys(N).length>0?N:ci;self.postMessage({type:"INITIAL_DATA_READY",data:{places:n,theme:fallbackData.theme}})}D.places=G,D.theme=X;const[B,ni]=await Promise.all([fi?li(fi):Promise.resolve([]),bi?li(bi):Promise.resolve([])]);try{const v=new Map;B.forEach(a=>{const j=parseInt(a.dayNumber);if(isNaN(j)||!a.city)return;v.has(a.city)||v.set(a.city,new Map);const O=v.get(a.city);O.has(j)||O.set(j,{dayNumber:j,city:a.city,theme:a.theme,date:a.date,hotelIds:a.hotelId?[a.hotelId]:[],activities:[]});const w=O.get(j);if(a.theme&&(w.theme=a.theme),a.date&&(w.date=a.date),a.hotelId&&(w.hotelIds||(w.hotelIds=[]),w.hotelIds.includes(a.hotelId)||w.hotelIds.push(a.hotelId)),a.placeId){const ti={placeId:a.placeId,time:a.time,label:a.label||void 0,description:a.description||void 0,tip:a.tip||void 0,icon:a.icon||void 0,link:a.link||void 0};w.activities.push(ti)}});const N=Array.from(v.entries()).map(([a,j])=>{const O=Math.min(...Array.from(j.keys()));return{city:a,minDay:O,cityDays:j}}).sort((a,j)=>a.minDay-j.minDay),n=[];for(const a of N){const j=Array.from(a.cityDays.values()).sort((O,w)=>O.dayNumber-w.dayNumber);n.push(...j)}n.length>0&&(D.itinerary=n,n.length>0&&(D.startDate=new Date(n[0].date),D.endDate=new Date(n[n.length-1].date)))}catch(v){console.warn("Failed to load Itinerary CSV in worker, using fallback.",v)}try{const v=new Map;ni.forEach(n=>{n.category&&(v.has(n.category)||v.set(n.category,{title:n.category,items:[]}),n.item&&v.get(n.category).items.push({name:n.item,notes:n.notes||""}))});const N=Array.from(v.values());N.length>0&&(D.tips=N)}catch(v){console.warn("Failed to load Tips CSV in worker, using fallback.",v)}self.postMessage({type:"FULL_DATA_READY",data:D})}catch(G){self.postMessage({type:"ERROR",error:G instanceof Error?G.message:String(G)})}}})();
